class Validate{form=null;fields=null;rules=[];config={submit:function(e,t){t.preventDefault(),e.clearErrors(),e.validate()&&e.form.submit()}};validations={required:function(e,t,r,i){let n=""!==t;return n||e._setError(r,"Value is required."),n},minlength:function(e,t,r,i){let n=t.length>=parseInt(i);return n||e._setError(r,"Length must be at least "+i+" character"+(1===i?"":"s")+"."),n},maxlength:function(e,t,r,i){let n=t.length<=parseInt(i);return n||e._setError(r,"Length must be at most "+i+" character"+(1===i?"":"s")+"."),n},equalsto:function(e,t,r,i){let n=e.form.querySelector(i),s=t===e._getValue(n);return s||e._setError(r,"Value is not the same."),s},email:function(e,t,r,i){let n=t.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return n||e._setError(r,"Value must be an email."),n},digits:function(e,t,r,i){let n=t.trim().match(/^[0-9]+$/);return n||e._setError(r,"Value must be digits only."),n},alphanumeric:function(e,t,r,i){let n=t.trim().match(/^[0-9a-zA-Z ]+$/);return n||e._setError(r,"Value must be alphanumeric."),n},numeric:function(e,t,r,i){let n=t.trim().match(/^-?\d*\.?\d*$/);return n||e._setError(r,"Value must be a number."),n},min:function(e,t,r,i){let n=this.numeric(e,t,r,i)&&parseInt(t)>=parseInt(i);return n||e._setError(r,"Value must be a greater than "+i+"."),n},max:function(e,t,r,i){let n=this.numeric(e,t,r,i)&&parseInt(t)<=parseInt(i);return n||e._setError(r,"Value must be a lower than "+i+"."),n}};constructor(e,t,r){this.form=e,this.config=this._deepExtend(this.config,t)||this.config,this.validations=this._deepExtend(this.validations,r)||this.validations,this.fields=e.querySelectorAll("input,textarea,select"),"FORM"===this.form.tagName&&(this._registerRules(),this._onSubmit())}_deepExtend=function(e,...t){if(!e)return{};for(let r of t)if(r)for(let[i,n]of Object.entries(r))switch(Object.prototype.toString.call(n)){case"[object Object]":e[i]=deepExtend(e[i],n);break;case"[object Array]":e[i]=deepExtend(Array(n.length),n);break;default:e[i]=n}return e};_setError=function(e,t){e.classList.contains("is-invalid")||e.classList.add("is-invalid");let r=e.parentNode,i=r.querySelector("div.error-container");null===i&&((i=document.createElement("div")).classList.add("error-container"),r.insertBefore(i,e.nextSibling));let n=document.createElement("div");n.classList.add("d-block"),n.classList.add("text-danger"),n.innerHTML=t,i.append(n)};_setError=function(e,t){e.classList.contains("is-invalid")||e.classList.add("is-invalid");let r=e.parentNode,i=r.querySelector("div.error-container");null===i&&((i=document.createElement("div")).classList.add("error-container"),r.insertBefore(i,e.nextSibling));let n=document.createElement("div");n.classList.add("d-block"),n.classList.add("text-danger"),n.innerHTML=t,i.append(n)};clearErrors=function(){for(let e=0;e<this.rules.length;e++){let t=this.rules[e].field;t.classList.remove("is-invalid");let r=t.parentNode.querySelector("div.error-container");null!==r&&r.remove()}};_registerRules=function(){for(let e=0;e<this.fields.length;e++){let t=this.fields[e];if("INPUT"===t.tagName&&"hidden"===t.getAttribute("type")||!t.hasAttribute("name")||""===t.getAttribute("name"))continue;let r={},i=Object.keys(this.validations);for(let n=0;n<i.length;n++){let s=i[n];t.hasAttribute(s)&&(r[s]=t.getAttribute(s))}this.rules.push({field:t,rules:r})}this.rules.length>0&&this.form.setAttribute("novalidate",!0)};_onSubmit=function(){let e=this;this.form.addEventListener("submit",function(t){e.config.submit(e,t)})};validate=function(){let e=!0;for(let t=0;t<this.rules.length;t++){let r=this.rules[t],i=r.field,n=r.rules,s=Object.keys(n);for(let l=0;l<s.length;l++){let a=s[l],o=n[a],u=this._getValue(i);e=this.validations[a](this,u,i,o)&&e}}return e};_getValue=function(e){let t="",r=e.tagName;switch(r){case"INPUT":t=e.value;break;case"SELECT":t=e.options[e.selectedIndex].value;break;case"TEXTAREA":t=e.innerHTML}return t}}